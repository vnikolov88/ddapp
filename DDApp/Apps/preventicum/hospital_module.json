{
  "dataTypes": {
    "Picture": {
      "properties": {
        "thumb": "System.String",
        "xs": "System.String",
        "s": "System.String",
        "m": "System.String",
        "l": "System.String",
        "xl": "System.String"
      }
    },
    "Address": {
      "properties": {
        "Street": "System.String",
        "StreetNr": "System.String",
        "Postcode": "System.String",
        "Place": "System.String",
        "Url": "System.String",
        "Latitude": "System.Nullable<System.Double>",
        "Longitude": "System.Nullable<System.Double>"
      },
      "methods": {
        "GetMapUrl": "(uint zoom) => $\"https://api.mapbox.com/v4/ferdijeute.k8km6fdm/url-bit.ly%2f1JJK3XY({Longitude},{Latitude})/{Longitude},{Latitude},{zoom}/120x80@2x.png?access_token=pk.eyJ1IjoiZmVyZGlqZXV0ZSIsImEiOiIwWkRRUW5ZIn0.aBIsPCWLwLXwmd_QOiJC4w\""
      }
    },
    "ContactPerson": {
      "properties": {
        "Title": "System.String",
        "FirstName": "System.String",
        "LastName": "System.String",
        "MainAreaOfFocus": "System.String",
        "Phone": "System.String",
        "Fax": "System.String",
        "Email": "System.String",
        "CV": "System.String",
        "Address": "Address",
        "Pictures": "Picture[]"
      },
      "methods": {
        "GetGUID": "() => $\"{Title},{FirstName},{LastName}\".GetGUID()"
      }
    },
    "MedicalService": {
      "properties": {
        "Code": "System.String",
        "Designation": "System.String",
        "Explanations": "System.String"
      }
    },
    "MedicalEquipment": {
      "properties": {
        "Code": "System.String",
        "Notfallverfuegbarkeit_24h": "System.String",
        "Explanations": "System.String"
      }
    },
    "Department": {
      "properties": {
        "Name": "System.String",
        "Key": "System.String",
        "ClassificationNumbers": "System.Collections.Generic.List<System.String>",
        "Address": "Address",
        "MedicalServices": "MedicalService[]",
        "Pictures": "Picture[]",
        "Description": "System.String",
        "Doctors": "ContactPerson[]"
      }
    },
    "Hospital": {
      "properties": {
        "Name": "System.String",
        "IK": "System.String",
        "Description": "System.String",
        "Pictures": "Picture[]",
        "Address": "Address",
        "Departments": "System.Collections.Generic.List<Department>",
        "MedicalEquipments": "System.Collections.Generic.List<MedicalEquipment>",
        "DistanceFromLocation": "System.Double"
      },
      "methods": {
        "CurrentDepartment": "() => Departments.FirstOrDefault()"
      }
    },
    "HospitalResults": {
      "properties": {
        "TotalItems": "System.Int32",
        "TotalPages": "System.Int32",
        "CurrentPage": "System.Int32",
        "ItemsPerPage": "System.Int32",
        "Items": "Hospital[]"
      }
    },
    "StrokeUnit": {
      "properties": {
        "Name": "System.String",
        "Street": "System.String",
        "PostCode": "System.String",
        "City": "System.String",
        "Latitude": "System.Double",
        "Longitude": "System.Double"
      }
    },
    "StrokeUnitResults": {
      "attributes": [ "[JsonConverter(typeof(JsonPathConverter))]" ],
      "properties": {
        "TotalItems": "System.Int32",
        "TotalPages": "System.Int32",
        "CurrentPage": "System.Int32",
        "ItemsPerPage": "System.Int32",
        "Items": {
          "type": "StrokeUnit[]",
          "attributes": [ "[JsonProperty(\"$\")]" ]
        }
      }
    }
  },
  "pages": {
    "PageHospital": {
      "title": "Preventicum Essen",
      "titleImage": "/preventicum/img/icon-1.png",
      "components": [
        {
          "renderType": "Article",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "mapper": [
              {
                "sourceType": "Hospital",
                "destinationType": "Article",
                "mapping": {
                  "d => d.Style": "s => Article.ImageStyle.HasBorder",
                  "d => d.Sources": "s => s.Pictures.Select(x => x.thumb)"
                }
              }
            ]
          }
        },
        {
          "renderType": "ItemList",
          "model": {
            "style": "OneRowItem",
            "items": [
              {
                "Link": "/ondevice/tel:+4912345678",
                "Title": "+49 123 456 78",
                "Icon": "fas fa-phone"
              },
              {
                "Link": "/ondevice/mailto:info@krenkenhaus.de",
                "Title": "info@krenkenhaus.de",
                "Icon": "far fa-envelope"
              }
            ]
          }
        },
        {
          "renderType": "Item",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "mapper": [
              {
                "sourceType": "Hospital",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Style": "s => ItemStyle.LeftSideImg",
                  "d => d.Link": "s => $\"/ondevice/geo:{s.Address.Latitude},{s.Address.Longitude}&q={Uri.EscapeDataString(s.Name)}\"",
                  "d => d.Title": "s => $\"{s.Address.Street} {s.Address.StreetNr}\"",
                  "d => d.Description": "s => $\"{s.Address.Postcode} {s.Address.Place}\"",
                  "d => d.Image": "s => s.Address.GetMapUrl(12)",
                  "d => d.Icon": "s => \"fas fa-map-marked\""
                }
              }
            ]
          }
        },
        {
          "renderType": "ItemList",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "mapper": [
              {
                "sourceType": "Hospital",
                "destinationType": "ItemList",
                "mapping": {
                  "d => d.Style": "s => ItemStyle.OneRowItem",
                  "d => d.Items": "s => s.Departments"
                }
              },
              {
                "sourceType": "Department",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Link": "(s, qc) => $\"PageDepartment?hospital_id={qc.hospital_id}&department_key={s.Key}\"",
                  "d => d.Title": "s => s.Name",
                  "d => d.Icon": "s => \"fas fa-play\""
                }
              }
            ]
          }
        }
      ]
    },
    "PageDepartment": {
      "title": "Unsere FachÃ¤rzte",
      "titleImage": "/preventicum/img/icon-1.png",
      "components": [
        {
          "renderType": "Article",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.FirstOrDefault(department => department.Key == qc.department_key)",
            "mapper": [
              {
                "sourceType": "Department",
                "destinationType": "Article",
                "mapping": {
                  "d => d.Style": "s => Article.ImageStyle.HasBorder",
                  "d => d.Sources": "s => s.Pictures.Select(x => x.thumb)",
                  "d => d.Title": "s => s.Name"
                }
              }
            ]
          }
        },
        {
          "renderType": "ItemList",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.FirstOrDefault(department => department.Key == qc.department_key)",
            "mapper": [
              {
                "sourceType": "Department",
                "destinationType": "ItemList",
                "mapping": {
                  "d => d.Style": "s => ItemStyle.LeftSideImg",
                  "d => d.Items": "s => new Department[] { s }"
                }
              },
              {
                "sourceType": "Department",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Link": "s => $\"/ondevice/geo:{s.Address.Latitude},{s.Address.Longitude}&q={Uri.EscapeDataString(s.Name)}\"",
                  "d => d.Title": "s => $\"{s.Address.Street} {s.Address.StreetNr}\"",
                  "d => d.Description": "s => $\"{s.Address.Postcode} {s.Address.Place}\"",
                  "d => d.Image": "s => s.Address.GetMapUrl(12)",
                  "d => d.Icon": "s => \"fas fa-map-marked\""
                }
              }
            ]
          }
        },
        {
          "renderType": "ItemList",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.FirstOrDefault(department => department.Key == qc.department_key)",
            "mapper": [
              {
                "sourceType": "Department",
                "destinationType": "ItemList",
                "mapping": {
                  "d => d.Subject": "s => \"Institut\"",
                  "d => d.Style": "s => ItemStyle.LeftSideImg",
                  "d => d.Items": "s => s.Doctors"
                }
              },
              {
                "sourceType": "ContactPerson",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Link": "(s, qc) => $\"PageDoctor?hospital_id={qc.hospital_id}&doctor_id={s.GetGUID()}\"",
                  "d => d.Image": "s => s.Pictures.Select(x => x.thumb).FirstOrDefault()",
                  "d => d.Title": "s => $\"{s.LastName}, {s.FirstName}, {s.Title}\"",
                  "d => d.Description": "s => s.MainAreaOfFocus",
                  "d => d.Icon": "s => \"fas fa-play\""
                }
              }
            ]
          }
        }
      ]
    },
    "PageDoctor": {
      "title": "PREVENTICUM ESSEN",
      "titleImage": "/preventicum/img/icon-1.png",
      "components": [
        {
          "renderType": "Article",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.SelectMany(tlhow => tlhow.Doctors).FirstOrDefault(doctor => qc.doctor_id == doctor.GetGUID().ToString())",
            "mapper": [
              {
                "sourceType": "ContactPerson",
                "destinationType": "Article",
                "mapping": {
                  "d => d.Style": "s => Article.ImageStyle.Profile",
                  "d => d.Sources": "s => s.Pictures.Select(x => x.thumb)",
                  "d => d.Title": "s => $\"{s.LastName}, {s.FirstName}, {s.Title}\""
                }
              }
            ]
          }
        },
        // List of contact details
        {
          "renderType": "Item",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.SelectMany(tlhow => tlhow.Doctors).FirstOrDefault(doctor => doctor.GetGUID().ToString() == qc.doctor_id)",
            "mapper": [
              {
                "sourceType": "ContactPerson",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Style": "s => string.IsNullOrWhiteSpace(s.CV) ? ItemStyle.Hidden : ItemStyle.OneRowItemIconColorInverted",
                  "d => d.Title": "s => s.CV",
                  "d => d.Link": "s => s.CV.OnDevice()",
                  "d => d.Icon": "s => \"fas fa-user\""
                }
              }
            ]
          }
        },
        {
          "renderType": "Item",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.SelectMany(tlhow => tlhow.Doctors).FirstOrDefault(doctor => doctor.GetGUID().ToString() == qc.doctor_id)",
            "mapper": [
              {
                "sourceType": "ContactPerson",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Style": "s => string.IsNullOrWhiteSpace(s.Phone) ? ItemStyle.Hidden : ItemStyle.OneRowItemIconColorInverted",
                  "d => d.Title": "s => s.Phone",
                  "d => d.Link": "s => s.Phone.OnDeviceCall()",
                  "d => d.Icon": "s => \"fas fa-phone\""
                }
              }
            ]
          }
        },
        {
          "renderType": "Item",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.SelectMany(tlhow => tlhow.Doctors).FirstOrDefault(doctor => doctor.GetGUID().ToString() == qc.doctor_id)",
            "mapper": [
              {
                "sourceType": "ContactPerson",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Style": "s => string.IsNullOrWhiteSpace(s.Address?.Url) ? ItemStyle.Hidden : ItemStyle.OneRowItemIconColorInverted",
                  "d => d.Title": "s => s.Address.Url",
                  "d => d.Link": "s => s.Address.Url.OnDevice()",
                  "d => d.Icon": "s => \"fas fa-globe-europe\""
                }
              }
            ]
          }
        },
        {
          "renderType": "Item",
          "provider": {
            "type": "Hospital",
            "url": "http://doctor-help.com:8668/api/v1/hospitals/api_v1_getbyik?ik={{hospital_id}}",
            "reducer": "(x, qc) => x.Departments.SelectMany(tlhow => tlhow.Doctors).FirstOrDefault(doctor => doctor.GetGUID().ToString() == qc.doctor_id)",
            "mapper": [
              {
                "sourceType": "ContactPerson",
                "destinationType": "Item",
                "mapping": {
                  "d => d.Style": "s => string.IsNullOrWhiteSpace(s.Email) ? ItemStyle.Hidden : ItemStyle.OneRowItemIconColorInverted",
                  "d => d.Title": "s => s.Email",
                  "d => d.Link": "s => s.Email.OnDeviceMail()",
                  "d => d.Icon": "s => \"far fa-envelope\""
                }
              }
            ]
          }
        }
      ]
    },
    "hospital-search-results": {
      "title": "",
      "titleIcon": "fas fa-map-marker-alt",
      "components": [
        {
          "renderType": "ResultList",
          "provider": {
            "type": "HospitalResults",
            "url": "http://116.203.112.43:9999/api/v1/hospital/{{search-type}}?distance=1000&address={{base64:search}}&page=1&pageSize=100&sortByPatientCount=true",
            "mapper": [
              {
                "sourceType": "HospitalResults",
                "destinationType": "ResultList",
                "mapping": {
                  "d => d.Style": "s => ResultItemStyle.SingleRowResult",
                  "d => d.Items": "s => s.Items"
                }
              },
              {
                "sourceType": "Hospital",
                "destinationType": "ResultItem",
                "mapping": {
                  "d => d.ItemName": "s => s.CurrentDepartment().Name",
                  "d => d.Description": "s => $\"{s.Name}, {s.CurrentDepartment().Address.Place}, {s.DistanceFromLocation} km.\"",
                  "d => d.Link": "s => $\"/ondevice/geo:{s.CurrentDepartment().Address.Latitude},{s.CurrentDepartment().Address.Longitude}&q={Uri.EscapeDataString(s.CurrentDepartment().Name)}\""
                }
              }
            ]
          }
        }
      ]
    },

    // Search results - schlaganfall
    "stroke-units-search-results": {
      "title": "",
      "titleIcon": "fas fa-map-marker-alt",
      "components": [
        {
          "renderType": "ResultList",
          "provider": {
            "type": "StrokeUnitResults",
            "url": "http://116.203.112.43:9999/api/v1/strokeunits/with-location?address={{base64:search}}",
            "mapper": [
              {
                "sourceType": "StrokeUnitResults",
                "destinationType": "ResultList",
                "mapping": {
                  "d => d.Style": "s => ResultItemStyle.SingleRowResult",
                  "d => d.Items": "s => s.Items"
                }
              },
              {
                "sourceType": "StrokeUnit",
                "destinationType": "ResultItem",
                "mapping": {
                  "d => d.ItemName": "s => s.Name",
                  "d => d.Description": "s => $\"{s.Name}, {s.Street}, {s.City} \"",
                  "d => d.Link": "s => $\"/ondevice/geo:{s.Latitude},{s.Longitude}&q={Uri.EscapeDataString(s.Name)}\""
                }
              }
            ]
          }
        }
      ]
    }
  }
}
